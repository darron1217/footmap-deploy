{"version":3,"sources":["webpack:///./src/views/Truck.vue?b7b1","webpack:///./src/views/Truck.vue?bc43","webpack:///src/views/Truck.vue","webpack:///./src/views/Truck.vue?c404","webpack:///./src/views/Truck.vue?a490","webpack:///./src/config.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","on","$event","go","staticStyle","_l","order","directives","name","rawName","value","isReady","expression","key","id","food","image","_v","_s","truck","count","readyOrder","staticRenderFns","props","data","orders","mounted","$nextTick","getOrders","$ionic","toastController","create","color","duration","message","channel","$pusher","subscribe","bind","t","present","console","log","methods","$router","push","url","res","component","APIURL","window","location","hostname"],"mappings":"yIAAA,yBAA4c,EAAG,G,2CCA/c,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACA,EAAG,aAAa,CAACA,EAAG,cAAc,CAACE,YAAY,UAAUC,MAAM,CAAC,MAAQ,YAAY,CAACH,EAAG,UAAU,CAACE,YAAY,SAASF,EAAG,cAAc,CAACG,MAAM,CAAC,KAAO,OAAOC,KAAK,OAAO,CAACJ,EAAG,aAAa,CAACK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,GAAG,QAAQ,CAACP,EAAG,WAAW,CAACQ,YAAY,CAAC,YAAY,QAAQL,MAAM,CAAC,KAAO,YAAY,KAAO,QAAQC,KAAK,eAAe,IAAI,IAAI,IAAI,GAAGJ,EAAG,cAAc,CAACA,EAAG,WAAWJ,EAAIa,GAAIb,EAAU,QAAE,SAASc,GAAO,OAAOV,EAAG,mBAAmB,CAACW,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAQJ,EAAMK,QAASC,WAAW,mBAAmBC,IAAIP,EAAMQ,IAAI,CAAClB,EAAG,WAAW,CAACA,EAAG,gBAAgB,CAACG,MAAM,CAAC,KAAO,SAASC,KAAK,SAAS,CAACJ,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMO,EAAMS,KAAKC,WAAWpB,EAAG,YAAY,CAACA,EAAG,KAAK,CAACJ,EAAIyB,GAAGzB,EAAI0B,GAAGZ,EAAMa,MAAMX,SAASZ,EAAG,KAAK,CAACJ,EAAIyB,GAAGzB,EAAI0B,GAAGZ,EAAMS,KAAKP,SAASZ,EAAG,IAAI,CAACJ,EAAIyB,GAAGzB,EAAI0B,GAAGZ,EAAMc,OAAO,UAAU,GAAGxB,EAAG,mBAAmB,CAACG,MAAM,CAAC,KAAO,QAAQ,CAACH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,WAAWE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI6B,WAAWf,MAAU,CAACd,EAAIyB,GAAG,WAAW,IAAI,MAAK,IAAI,IAAI,IACpnCK,EAAkB,G,iCCqCtB,GACEC,MAAO,CAAC,MACRC,KAFF,WAGI,MAAO,CACLC,OAAQ,KAGZC,QAAS,WAAX,WACIjC,KAAKkC,WAAU,WAGblC,KAAKmC,YAELnC,KAAKoC,OAAOC,gBAAgBC,OAAO,CACjCC,MAAO,OACPC,SAAU,IACVC,QAAS,kBACjB,2CAII,IAAIC,EAAU1C,KAAK2C,QAAQC,UAAU,UACrCF,EAAQG,KAAK,SAAjB,qBACM,EAAN,+BACQN,MAAO,OACPC,SAAU,IACVC,QAAS,gBACjB,kBACQK,EAAEC,UAEF,EAAR,eAEMC,QAAQC,IAAI,UAAWlB,OAG3BmB,QAAS,CACPxC,GADJ,SACA,GACMV,KAAKmD,QAAQC,KAAKC,IAEpBlB,UAJJ,WAIA,WACM,EAAN,sFACQa,QAAQC,IAAIK,GACZ,EAAR,kBAGI1B,WAVJ,SAUA,cACM,EAAN,8DAEQ,EAAR,kBCtF+U,I,wBCQ3U2B,EAAY,eACd,EACAzD,EACA+B,GACA,EACA,KACA,KACA,MAIa,aAAA0B,E,2CCnBf,IAAMC,EAAS,KAAKC,OAAOC,SAASC,SAAW,QAEhCH","file":"js/chunk-5ac938ec.ea7f0990.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Truck.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Truck.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ion-page',[_c('ion-header',[_c('ion-toolbar',{staticClass:\"toolbar\",attrs:{\"color\":\"warning\"}},[_c('ion-row',{staticClass:\"icon\"}),_c('ion-buttons',{attrs:{\"slot\":\"end\"},slot:\"end\"},[_c('ion-button',{on:{\"click\":function($event){return _vm.go('/')}}},[_c('ion-icon',{staticStyle:{\"font-size\":\"40px\"},attrs:{\"slot\":\"icon-only\",\"name\":\"home\"},slot:\"icon-only\"})],1)],1)],1)],1),_c('ion-content',[_c('ion-list',_vm._l((_vm.orders),function(order){return _c('ion-item-sliding',{directives:[{name:\"show\",rawName:\"v-show\",value:(!order.isReady),expression:\"!order.isReady\"}],key:order.id},[_c('ion-item',[_c('ion-thumbnail',{attrs:{\"slot\":\"start\"},slot:\"start\"},[_c('img',{attrs:{\"src\":order.food.image}})]),_c('ion-label',[_c('h2',[_vm._v(_vm._s(order.truck.name))]),_c('h3',[_vm._v(_vm._s(order.food.name))]),_c('p',[_vm._v(_vm._s(order.count)+\"개\")])])],1),_c('ion-item-options',{attrs:{\"side\":\"end\"}},[_c('ion-item-option',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.readyOrder(order)}}},[_vm._v(\"준비완료\")])],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ion-page>\r\n    <ion-header>\r\n      <ion-toolbar color=\"warning\" class=\"toolbar\">\r\n        <ion-row class=\"icon\"></ion-row>\r\n        <ion-buttons slot=\"end\">\r\n          <ion-button @click=\"go('/')\">\r\n          <ion-icon slot=\"icon-only\" name=\"home\" style=\"font-size:40px\"></ion-icon>\r\n        </ion-button>\r\n      </ion-buttons>\r\n    </ion-toolbar>\r\n    </ion-header>\r\n    <ion-content>\r\n      <ion-list>\r\n        <ion-item-sliding v-for=\"order in orders\" v-bind:key=\"order.id\" v-show=\"!order.isReady\">\r\n          <ion-item>\r\n            <ion-thumbnail slot=\"start\">\r\n              <img :src=\"order.food.image\">\r\n            </ion-thumbnail>\r\n            <ion-label>\r\n              <h2>{{ order.truck.name }}</h2>\r\n              <h3>{{ order.food.name }}</h3>\r\n              <p>{{ order.count }}개</p>\r\n            </ion-label>\r\n          </ion-item>\r\n          <ion-item-options side=\"end\">\r\n            <ion-item-option color=\"primary\" @click=\"readyOrder(order)\">준비완료</ion-item-option>\r\n          </ion-item-options>\r\n        </ion-item-sliding>\r\n      </ion-list>\r\n    </ion-content>\r\n  </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport APIURL from '../config.js'\r\n\r\nexport default {\r\n  props: ['id'],\r\n  data() {\r\n    return {\r\n      orders: [],\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.$nextTick(function () {\r\n      // Code that will run only after the\r\n      // entire view has been rendered\r\n      this.getOrders();\r\n\r\n      this.$ionic.toastController.create({\r\n        color: 'dark',\r\n        duration: 2000,\r\n        message: '가맹점 로그인 되었습니다'\r\n      }).then(t => t.present());\r\n    })\r\n\r\n    // Pusher등록\r\n    var channel = this.$pusher.subscribe('orders');\r\n    channel.bind('truck.'+this.id, (data) => {\r\n      this.$ionic.toastController.create({\r\n        color: 'dark',\r\n        duration: 2000,\r\n        message: '주문이 추가되었습니다'\r\n      }).then(t => {\r\n        t.present();\r\n        // 목록 갱신\r\n        this.getOrders();\r\n      });\r\n      console.log('orderd!', data);\r\n    });\r\n  },\r\n  methods: {\r\n    go(url) {\r\n      this.$router.push(url);\r\n    },\r\n    getOrders() {\r\n      axios.get(APIURL+'/orders?_expand=truck&_expand=food&truckId='+this.id).then(res => {\r\n        console.log(res);\r\n        this.orders = res.data;\r\n      });\r\n    },\r\n    readyOrder(order) {\r\n      axios.patch(APIURL+'/orders/'+order.id, {isReady:true}).then(() => {\r\n        // 목록 갱신\r\n        this.getOrders();\r\n      });\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.icon {position: absolute; z-index: 2; top:0%; left:0%; width: 100%; height: 100%; background: url(\"../assets/foot_icon.png\") no-repeat; background-size: contain; background-position: center}\r\n  .toolbar {position: relative; z-index: 1;}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Truck.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Truck.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Truck.vue?vue&type=template&id=08780ebc&\"\nimport script from \"./Truck.vue?vue&type=script&lang=js&\"\nexport * from \"./Truck.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Truck.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const APIURL = '//'+window.location.hostname + ':3000';\r\n\r\nexport default APIURL"],"sourceRoot":""}