(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33b90ea1"],{"1fb9":function(t,e,n){},"5eba":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ion-page",[n("ion-header",[n("ion-toolbar",{staticClass:"toolbar",attrs:{color:"warning"}},[n("ion-row",{staticClass:"icon"}),n("ion-buttons",{attrs:{slot:"start"},slot:"start"},[n("ion-back-button",{attrs:{text:"뒤로"}})],1),n("ion-buttons",{attrs:{slot:"end"},slot:"end"},[n("ion-button",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.truck.id,expression:"truck.id !== undefined"}],on:{click:t.deleteTruck}},[t._v("삭제")])],1)],1)],1),n("ion-content",[n("form",{on:{submit:function(e){return e.preventDefault(),t.processForm(e)}}},[n("ion-list",[n("ion-list-header",[t._v("기본정보")]),n("ion-item",[n("ion-label",{staticStyle:{"font-family":"'Jua', 'Do Hyeon', 'Noto Sans KR', sans-serif","font-size":"24px"},attrs:{position:"floating"}},[t._v("트럭이름 "),n("ion-text",{attrs:{color:"danger"}},[t._v("*")])],1),n("ion-input",{staticStyle:{"font-family":"'Jua', 'Do Hyeon', 'Noto Sans KR', sans-serif"},attrs:{required:"",type:"text",name:"name",value:t.truck.name},on:{ionInput:function(e){t.truck.name=e.target.value}}})],1),n("ion-item",[n("ion-label",{staticStyle:{"font-family":"'Jua', 'Do Hyeon', 'Noto Sans KR', sans-serif","font-size":"24px"},attrs:{position:"floating"}},[t._v("전화번호 "),n("ion-text",{attrs:{color:"danger"}},[t._v("*")])],1),n("ion-input",{staticStyle:{"font-family":"'Jua', 'Do Hyeon', 'Noto Sans KR', sans-serif"},attrs:{required:"",type:"text",name:"phone",value:t.truck.phone},on:{ionInput:function(e){t.truck.phone=e.target.value}}})],1),n("ion-item",[n("ion-label",{staticStyle:{"font-family":"'Jua', 'Do Hyeon', 'Noto Sans KR', sans-serif","font-size":"24px"},attrs:{position:"floating"}},[t._v("소개")]),n("ion-textarea",{staticStyle:{"font-family":"'Jua', 'Do Hyeon', 'Noto Sans KR', sans-serif"},attrs:{name:"description",value:t.truck.description},on:{ionInput:function(e){t.truck.description=e.target.value}}})],1)],1),n("ion-list",[n("ion-list-header",[t._v("음식목록")]),t._l(t.truck.foods,(function(e){return n("ion-item-sliding",{directives:[{name:"show",rawName:"v-show",value:!e.deleted,expression:"!food.deleted"}],key:e.id,attrs:{button:""}},[n("ion-item",{on:{click:function(n){return t.showFoodPrompt(e)}}},[n("ion-thumbnail",{attrs:{slot:"start"},slot:"start"},[n("img",{attrs:{src:e.image}})]),n("ion-label",[n("h3",[t._v(t._s(e.name))]),n("p",[t._v(t._s(e.description))])]),n("h3",[t._v(t._s(e.price)+"원")])],1),n("ion-item-options",{attrs:{side:"end"}},[n("ion-item-option",{attrs:{color:"danger"},on:{click:function(n){return t.deleteFood(e)}}},[t._v("삭제")])],1)],1)})),n("ion-button",{attrs:{expand:"full",fill:"clear"},on:{click:function(e){return t.showFoodPrompt({price:0})}}},[n("ion-icon",{attrs:{slot:"icon-only",color:"warning",name:"ios-add-circle-outline"},slot:"icon-only"})],1)],2),n("div",{staticClass:"ion-padding"},[n("ion-button",{staticClass:"ion-no-margin",attrs:{color:"warning",expand:"block",type:"submit"}},[t._v("저장")])],1)],1)])],1)},r=[],a=(n("a4d3"),n("e01a"),n("99af"),n("d81d"),n("b0c0"),n("96cf"),n("89ba")),i=n("bc3a"),s=n.n(i),c=n("2b0e"),u=n("db49"),l={props:["id"],data:function(){return{truck:{foods:[]},deletedFoods:[]}},mounted:function(){this.$nextTick((function(){this.getTruck(this.id)}))},methods:{getTruck:function(t){var e=this;"new"!=t&&this.$ionic.loadingController.create({message:"Loading"}).then((function(n){n.present(),s.a.get("".concat(u["a"],"/trucks/").concat(t,"?_embed=foods")).then((function(t){e.truck=t.data,n.dismiss(),console.log(e.truck)}))}))},processForm:function(t){var e=this;t.preventDefault(),this.$ionic.loadingController.create({message:"Loading"}).then((function(t){t.present();var n=e.truck.foods;delete e.truck.foods;var o=function(o){console.log(o),t.dismiss(),e.$ionic.alertController.create({header:"저장되었습니다",message:"<b>".concat(e.truck.name," 트럭이 저장되었습니다</b>"),buttons:[{text:"OK"}]}).then((function(t){return t.present()}));var r=o.data;n.map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.truckId=r.id,!e.deleted){t.next=6;break}return t.next=4,s.a.delete("".concat(u["a"],"/foods/").concat(e.id));case 4:t.next=13;break;case 6:if(void 0!==e.id){t.next=11;break}return t.next=9,s.a.post("".concat(u["a"],"/foods"),e).then((function(t){n[o]=t.data}));case 9:t.next=13;break;case 11:return t.next=13,s.a.put("".concat(u["a"],"/foods/").concat(e.id),e);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),e.$router.go(-1)};"new"==e.id?s.a.post("".concat(u["a"],"/trucks"),e.truck).then(o):s.a.put("".concat(u["a"],"/trucks/").concat(e.id),e.truck).then(o)}))},showFoodPrompt:function(t){var e=this;return this.$ionic.alertController.create({header:"음식정보",inputs:[{name:"name",type:"text",value:t.name,placeholder:"음식 이름을 입력하세요"},{name:"description",type:"text",value:t.description,placeholder:"음식 설명을 입력하세요"},{name:"price",type:"number",value:t.price,placeholder:"음식 가격을 입력하세요"}],buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"확인",handler:function(n){t.name=n.name,t.description=n.description,t.price=n.price,t.id||e.truck.foods.push(t),e.$ionic.toastController.create({color:"dark",duration:2e3,message:"저장되었습니다"}).then((function(t){return t.present()}))}}]}).then((function(t){return t.present()}))},deleteFood:function(t){c["a"].set(t,"deleted",!0),this.$ionic.toastController.create({color:"dark",duration:2e3,message:"삭제되었습니다"}).then((function(t){return t.present()}))},deleteTruck:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.a.delete("".concat(u["a"],"/trucks/").concat(this.id));case 2:this.$ionic.alertController.create({header:"삭제되었습니다",message:"<b>트럭이 삭제되었습니다</b>",buttons:[{text:"OK"}]}).then((function(t){return t.present()})),this.$router.go(-1);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},d=l,f=(n("82b5"),n("2877")),p=Object(f["a"])(d,o,r,!1,null,null,null);e["default"]=p.exports},"82b5":function(t,e,n){"use strict";var o=n("1fb9"),r=n.n(o);r.a},db49:function(t,e,n){"use strict";var o="//"+window.location.hostname+":3000";e["a"]=o}}]);
//# sourceMappingURL=chunk-33b90ea1.3f54f07e.js.map